# swigger2api

ğŸš€ A powerful CLI tool to generate TypeScript/JavaScript API code from Swagger/OpenAPI documentation.

## Features

- ğŸ¯ **æç®€åˆå§‹åŒ–**ï¼šåªéœ€é€‰æ‹©è¯­è¨€ï¼Œå…¶ä»–éƒ½æœ‰åˆç†é»˜è®¤å€¼
- ğŸ“ **æ¸…æ™°æ³¨é‡Š**ï¼šæ¯ä¸ªé…ç½®é¡¹éƒ½æœ‰è¯¦ç»†è¯´æ˜å’ŒTODOæç¤º
- ğŸ”§ **æ¸è¿›é…ç½®**ï¼šå¯ä»¥å…ˆç”¨é»˜è®¤é…ç½®å¿«é€Ÿå¼€å§‹ï¼Œåç»­å†è‡ªå®šä¹‰
- ğŸ’¡ **æ™ºèƒ½æ¨¡æ¿**ï¼šæ ¹æ®JS/TSè‡ªåŠ¨ç”Ÿæˆå¯¹åº”çš„é…ç½®æ–‡ä»¶
- ğŸš€ **å¼€ç®±å³ç”¨**ï¼šä¿®æ”¹3ä¸ªå¿…è¦é…ç½®é¡¹å³å¯å¼€å§‹ä½¿ç”¨
- ğŸ“¦ **TypeScriptæ”¯æŒ**ï¼šå®Œæ•´çš„ç±»å‹å®šä¹‰ç”Ÿæˆ
- ğŸ”„ **å¢é‡æ›´æ–°**ï¼šæ™ºèƒ½æ£€æµ‹å˜åŒ–ï¼Œåªæ›´æ–°å¿…è¦çš„æ–‡ä»¶
- ğŸ“‹ **æ›´æ–°æ—¥å¿—**ï¼šè‡ªåŠ¨ç”Ÿæˆè¯¦ç»†çš„APIå˜æ›´æ—¥å¿—

## Installation

### Global Installation (Recommended)

```bash
npm install -g swigger2api
```

### Local Installation

```bash
npm install swigger2api --save-dev
```

## Quick Start

### 1. Initialize Configuration

```bash
# Global installation
swigger2api init

# Local installation
npx swigger2api init
```

You'll be prompted to choose your preferred language:
- **TypeScript (.ts)** - Recommended for TypeScript projects
- **JavaScript (.js)** - For JavaScript projects

This will create a `swigger2api.config.js` or `swigger2api.config.ts` file in your project root.

### 2. Configure Your Project

Edit the generated configuration file and update these essential settings:

```javascript
import { defineConfig } from 'swigger2api';

export default defineConfig({
  // ğŸ¯ Required: Your project name
  projectName: "my-awesome-project", // TODO: Change this

  // ğŸ“¡ Required: Your Swagger documentation source
  source: "http://localhost:3000/api-docs", // TODO: Change this

  // ğŸ“¦ Required: Request library import (adjust for your project)
  requestImport: "import axios from '@/utils/request'", // TODO: Adjust this

  // Other settings have sensible defaults
  language: "ts",
  outputDir: "./src/api",
  generateTypes: true,
  // ... more options
});
```

### 3. Generate API Code

```bash
# If installed globally
swigger2api generate

# If installed locally (use npx)
npx swigger2api generate

# Force regeneration (even if no changes detected)
swigger2api generate --force
# or with npx
npx swigger2api generate --force

# Use custom config file
swigger2api generate --config ./custom.config.js
# or with npx
npx swigger2api generate --config ./custom.config.js
```

> **Note**: The `swigger2api` command can be used directly only when installed globally. If installed locally as a project dependency, you need to prefix it with `npx`.

## Configuration Options

### Basic Configuration

| Option | Type | Default | Description |
|--------|------|---------|-------------|
| `projectName` | `string` | `"my-project"` | Your project name |
| `language` | `"js" \| "ts"` | `"ts"` | Target language |
| `source` | `string \| object \| function` | `null` | Swagger documentation source |
| `outputDir` | `string` | `"./src/api"` | Output directory for generated files |
| `generateTypes` | `boolean` | `true` | Whether to generate TypeScript types |
| `requestImport` | `string` | `"import axios from '@/utils/request'"` | Request library import statement |

### Advanced Configuration

```javascript
import { defineConfig } from 'swigger2api';

export default defineConfig({
  // Update log configuration
  updateLog: {
    enabled: true,
    outputPath: "./",
  },

  // Module naming strategy
  moduleNaming: {
    strategy: "tags", // "tags" | "custom"
    customFunction: null, // Custom naming function
  },

  // API function naming strategy
  apiNaming: {
    strategy: "operationId", // "operationId" | "custom"
    customFunction: null, // Custom naming function
  },
});
```

## Data Source Types

The `source` configuration supports multiple types:

### 1. URL (Most Common)
```javascript
import { defineConfig } from 'swigger2api';

export default defineConfig({
  source: "http://localhost:3000/api-docs"
  // or
  // source: "https://api.example.com/swagger.json"
});
```

### 2. Local File Path
```javascript
import { defineConfig } from 'swigger2api';

export default defineConfig({
  source: "./swagger.json"
  // or
  // source: "/path/to/swagger.json"
});
```

### 3. JSON Object
```javascript
import { defineConfig } from 'swigger2api';

export default defineConfig({
  source: {
    openapi: "3.0.0",
    info: { title: "My API", version: "1.0.0" },
    paths: { /* ... */ }
  }
});
```

### 4. Async Function
```javascript
import { defineConfig } from 'swigger2api';

export default defineConfig({
  source: async () => {
    const response = await fetch("http://api.example.com/docs");
    return response.json();
  }
});
```

## Generated File Structure

```
src/api/
â”œâ”€â”€ types/           # TypeScript type definitions
â”‚   â”œâ”€â”€ common.ts
â”‚   â””â”€â”€ [module].ts
â”œâ”€â”€ [module]/        # API modules grouped by tags
â”‚   â”œâ”€â”€ index.ts
â”‚   â””â”€â”€ types.ts
â””â”€â”€ index.ts         # Main export file
```

## CLI Commands

### `swigger2api init`

Initialize a new configuration file.

**Options:**
- `-l, --language <language>` - Specify language (js|ts), default: ts

**Examples:**
```bash
swigger2api init
swigger2api init --language js
```

### `swigger2api generate`

Generate API code from Swagger documentation.

**Options:**
- `-f, --force` - Force regeneration even if no changes detected
- `-c, --config <path>` - Specify config file path, default: ./swigger2api.config.js

**Examples:**
```bash
swigger2api generate
swigger2api generate --force
swigger2api generate --config ./custom.config.js
```

## Examples

### Basic TypeScript Setup

```typescript
// swigger2api.config.ts
import { defineConfig } from 'swigger2api';

export default defineConfig({
  projectName: "my-app",
  language: "ts" as const,
  source: "http://localhost:8080/v3/api-docs",
  requestImport: "import request from '@/utils/request'",
  outputDir: "./src/api",
});
```

### JavaScript with Custom Axios

```javascript
// swigger2api.config.js
import { defineConfig } from 'swigger2api';

export default defineConfig({
  projectName: "my-app",
  language: "js",
  source: "https://petstore.swagger.io/v2/swagger.json",
  requestImport: "const axios = require('./http-client')",
  outputDir: "./api",
});
```

### Custom Module Naming

```javascript
import { defineConfig } from 'swigger2api';

export default defineConfig({
  projectName: "my-app",
  source: "http://localhost:3000/api-docs",
  moduleNaming: {
    strategy: "custom",
    customFunction: (apiPath, operationId, tags) => {
      // Extract module name from API path
      const pathParts = apiPath.split('/').filter(Boolean);
      return pathParts[1] || 'default';
    },
  },
});
```

## Troubleshooting

### Common Issues

1. **Configuration file not found**
   ```bash
   # Make sure you've run init first
   swigger2api init
   ```

2. **Source URL not accessible**
   ```bash
   # Check if your Swagger URL is accessible
   curl http://localhost:3000/api-docs
   ```

3. **Permission errors**
   ```bash
   # Make sure you have write permissions to the output directory
   chmod 755 ./src/api
   ```

### Debug Mode

Set the `DEBUG` environment variable for verbose output:

```bash
DEBUG=swigger2api swigger2api generate
```

## Contributing

We welcome contributions! Please see our [Contributing Guide](CONTRIBUTING.md) for details.

## License

MIT Â© [Your Name](https://github.com/yourusername/swigger2api)

## Changelog

See [CHANGELOG.md](CHANGELOG.md) for release history.

---

Made with â¤ï¸ by the swigger2api team